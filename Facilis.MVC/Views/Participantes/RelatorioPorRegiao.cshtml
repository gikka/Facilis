@model Facilis.MVC.ViewModels.ParticipanteViewModel
@{
    ViewBag.Title = "Relatório Por Região";
}

<h2>Relatório Por Região</h2>
<div class="row">
    <div class="form-group col-md-6">
        @Html.LabelFor(model => model.Evento.Nome, htmlAttributes: new { @class = "control-label" })
        @Html.DropDownListFor(model => model.EventoId, ViewBag.EventoList as SelectList, new { @class = "form-control" })
        @Html.ValidationMessageFor(model => model.EventoId, "", new { @class = "text-danger" })
    </div>
</div>
<div class="row">
    <div class="form-group col-md-6">
        @Html.ActionLink("Emitir", "RelatorioPorRegiaoImpressao", "Participantes", new { id = "0" }, new { @id = "emitir", @class = "btn btn-primary", target = "_blank" })
    </div>
</div>
<script type="text/javascript">
    $(document).ready(function () {
        $("#EventoId").change(function (e) {
            var eventoId = $("#EventoId").val();
            if (eventoId > 0) {
                e.preventDefault();
                var newUrl = $("#emitir").prop('href').replace('0', eventoId);
                $("#emitir").prop('href', newUrl);
            }
        });
    });
</script>